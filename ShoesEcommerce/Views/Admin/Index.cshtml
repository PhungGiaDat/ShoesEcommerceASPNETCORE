@model ShoesEcommerce.ViewModels.Admin.AdminReportViewModel
@{
    ViewData["Title"] = "Báo cáo tổng quan";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<!-- Dashboard Header -->
<div class="dashboard-header mb-4">
    <h2 class="fw-bold">Báo cáo tổng quan</h2>
</div>
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold">@Model.TotalOrders</div>
                <div class="text-muted">Đơn hàng</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold">@Model.TotalRevenue.ToString("N0")đ</div>
                <div class="text-muted">Doanh thu</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold">@Model.TotalCost.ToString("N0")đ</div>
                <div class="text-muted">Tiền vốn</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold @(Model.TotalProfit < 0 ? "text-danger" : "text-success")">@Model.TotalProfit.ToString("N0")đ</div>
                <div class="text-muted">Tiền lời</div>
            </div>
        </div>
    </div>
</div>
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold">@Model.TotalProducts</div>
                <div class="text-muted">Sản phẩm</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold">@Model.TotalStock</div>
                <div class="text-muted">Tồn kho</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold text-warning">@Model.LowStockCount</div>
                <div class="text-muted">Sắp hết hàng</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <div class="fs-2 fw-bold text-danger">@Model.OutOfStockCount</div>
                <div class="text-muted">Hết hàng</div>
            </div>
        </div>
    </div>
</div>
<div class="chart-container mb-4">
    <canvas id="revenueChart"></canvas>
</div>
@section Scripts {
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const ctx = document.getElementById('revenueChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
                datasets: [{
                    label: 'Doanh thu',
                    data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.RevenueByMonth)),
                    borderColor: '#4a90e2',
                    backgroundColor: 'rgba(74, 144, 226, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#4a90e2',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#4a90e2',
                        borderWidth: 1
                    }
                },
                scales: {
                    x: {
                        grid: { display: true, color: 'rgba(0, 0, 0, 0.1)' },
                        ticks: { color: '#666' }
                    },
                    y: {
                        beginAtZero: true,
                        grid: { display: true, color: 'rgba(0, 0, 0, 0.1)' },
                        ticks: { color: '#666', stepSize: 50 }
                    }
                },
                elements: { point: { hoverBackgroundColor: '#4a90e2' } },
                interaction: { intersect: false, mode: 'index' }
            }
        });
        window.addEventListener('resize', function() { chart.resize(); });
    });
</script>
}