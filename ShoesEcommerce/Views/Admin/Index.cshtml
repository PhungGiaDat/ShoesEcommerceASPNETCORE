@model ShoesEcommerce.ViewModels.Admin.AdminReportViewModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="admin-dashboard">
    <!-- Welcome Section -->
    <div class="welcome-section">
        <div class="welcome-content">
            <h1 class="welcome-title">Dashboard</h1>
            <p class="welcome-subtitle">Tổng quan hoạt động kinh doanh</p>
        </div>
        <div class="welcome-date">
            <span class="date-value">@DateTime.Now.ToString("dddd, dd MMMM yyyy", new System.Globalization.CultureInfo("vi-VN"))</span>
        </div>
    </div>

    <!-- Main Stats Grid -->
    <div class="stats-grid">
        <!-- Revenue Card -->
        <div class="stat-card">
            <div class="stat-card-body">
                <div class="stat-icon revenue">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Doanh thu</span>
                    <span class="stat-value">@Model.TotalRevenue.ToString("N0")₫</span>
                </div>
            </div>
        </div>

        <!-- Orders Card -->
        <div class="stat-card">
            <div class="stat-card-body">
                <div class="stat-icon orders">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Đơn hàng</span>
                    <span class="stat-value">@Model.TotalOrders</span>
                </div>
            </div>
        </div>

        <!-- Cost Card -->
        <div class="stat-card">
            <div class="stat-card-body">
                <div class="stat-icon cost">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Chi phí</span>
                    <span class="stat-value">@Model.TotalCost.ToString("N0")₫</span>
                </div>
            </div>
        </div>

        <!-- Profit Card -->
        <div class="stat-card @(Model.TotalProfit >= 0 ? "positive" : "negative")">
            <div class="stat-card-body">
                <div class="stat-icon profit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                        <polyline points="17 6 23 6 23 12"></polyline>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Lợi nhuận</span>
                    <span class="stat-value">@Model.TotalProfit.ToString("N0")₫</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Inventory Stats -->
    <div class="inventory-section">
        <h3 class="section-title">Tồn kho</h3>
        <div class="inventory-grid">
            <div class="inventory-card">
                <div class="inventory-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    </svg>
                </div>
                <div class="inventory-info">
                    <span class="inventory-value">@Model.TotalProducts</span>
                    <span class="inventory-label">Sản phẩm</span>
                </div>
            </div>

            <div class="inventory-card">
                <div class="inventory-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                </div>
                <div class="inventory-info">
                    <span class="inventory-value">@Model.TotalStock</span>
                    <span class="inventory-label">Tổng tồn kho</span>
                </div>
            </div>

            <div class="inventory-card warning">
                <div class="inventory-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                </div>
                <div class="inventory-info">
                    <span class="inventory-value">@Model.LowStockCount</span>
                    <span class="inventory-label">Sắp hết</span>
                </div>
            </div>

            <div class="inventory-card danger">
                <div class="inventory-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                </div>
                <div class="inventory-info">
                    <span class="inventory-value">@Model.OutOfStockCount</span>
                    <span class="inventory-label">Hết hàng</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart Section -->
    <div class="chart-section">
        <div class="chart-card">
            <div class="chart-header">
                <div class="chart-title">
                    <h3>Doanh thu theo tháng</h3>
                    <p>Năm @DateTime.Now.Year</p>
                </div>
            </div>
            <div class="chart-body">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions-section">
        <h3 class="section-title">Thao tác nhanh</h3>
        <div class="quick-actions-grid">
            <a href="/Admin/Product/Create" class="quick-action-card">
                <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </div>
                <span class="quick-action-label">Thêm sản phẩm</span>
            </a>
            <a href="/Admin/Order/Pending" class="quick-action-card">
                <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                    </svg>
                </div>
                <span class="quick-action-label">Đơn chờ duyệt</span>
            </a>
            <a href="/Admin/Stock/Import" class="quick-action-card">
                <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </div>
                <span class="quick-action-label">Nhập kho</span>
            </a>
            <a href="/Admin/Discount/Index" class="quick-action-card">
                <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="19" y1="5" x2="5" y2="19"></line>
                        <circle cx="6.5" cy="6.5" r="2.5"></circle>
                        <circle cx="17.5" cy="17.5" r="2.5"></circle>
                    </svg>
                </div>
                <span class="quick-action-label">Khuyến mãi</span>
            </a>
        </div>
    </div>
</div>

@section Styles {
<style>
    .admin-dashboard {
        max-width: 1400px;
        margin: 0 auto;
    }

    /* Welcome Section */
    .welcome-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
    }

    .welcome-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #111827;
        margin: 0 0 0.25rem;
    }

    .welcome-subtitle {
        font-size: 0.9375rem;
        color: #6b7280;
        margin: 0;
    }

    .date-value {
        font-size: 0.875rem;
        color: #6b7280;
    }

    /* Stats Grid */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        transition: all 0.2s ease;
    }

    .stat-card:hover {
        border-color: #d1d5db;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .stat-card.positive .stat-value {
        color: #059669;
    }

    .stat-card.negative .stat-value {
        color: #dc2626;
    }

    .stat-card-body {
        padding: 1.25rem;
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .stat-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .stat-icon.revenue {
        background: #f0fdf4;
        color: #16a34a;
    }

    .stat-icon.orders {
        background: #eff6ff;
        color: #2563eb;
    }

    .stat-icon.cost {
        background: #fef3c7;
        color: #d97706;
    }

    .stat-icon.profit {
        background: #f3f4f6;
        color: #374151;
    }

    .stat-content {
        flex: 1;
        min-width: 0;
    }

    .stat-label {
        display: block;
        font-size: 0.8125rem;
        color: #6b7280;
        margin-bottom: 0.25rem;
    }

    .stat-value {
        display: block;
        font-size: 1.375rem;
        font-weight: 600;
        color: #111827;
    }

    /* Section Title */
    .section-title {
        font-size: 0.875rem;
        font-weight: 600;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin: 0 0 1rem;
    }

    /* Inventory Section */
    .inventory-section {
        margin-bottom: 2rem;
    }

    .inventory-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
    }

    .inventory-card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 1rem;
        display: flex;
        align-items: center;
        gap: 0.875rem;
        transition: all 0.2s;
    }

    .inventory-card:hover {
        border-color: #d1d5db;
    }

    .inventory-card.warning {
        border-left: 3px solid #f59e0b;
    }

    .inventory-card.danger {
        border-left: 3px solid #ef4444;
    }

    .inventory-icon {
        width: 40px;
        height: 40px;
        background: #f9fafb;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6b7280;
    }

    .inventory-card.warning .inventory-icon {
        background: #fef3c7;
        color: #d97706;
    }

    .inventory-card.danger .inventory-icon {
        background: #fee2e2;
        color: #dc2626;
    }

    .inventory-value {
        display: block;
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
        line-height: 1;
    }

    .inventory-label {
        display: block;
        font-size: 0.8125rem;
        color: #6b7280;
        margin-top: 0.125rem;
    }

    /* Chart Section */
    .chart-section {
        margin-bottom: 2rem;
    }

    .chart-card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        overflow: hidden;
    }

    .chart-header {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid #f3f4f6;
    }

    .chart-title h3 {
        font-size: 1rem;
        font-weight: 600;
        color: #111827;
        margin: 0 0 0.125rem;
    }

    .chart-title p {
        font-size: 0.8125rem;
        color: #9ca3af;
        margin: 0;
    }

    .chart-body {
        padding: 1.5rem;
        height: 320px;
    }

    /* Quick Actions */
    .quick-actions-section {
        margin-bottom: 2rem;
    }

    .quick-actions-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
    }

    .quick-action-card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 1.25rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
        transition: all 0.2s ease;
    }

    .quick-action-card:hover {
        border-color: #111827;
        background: #fafafa;
    }

    .quick-action-icon {
        width: 48px;
        height: 48px;
        background: #f9fafb;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #374151;
        transition: all 0.2s;
    }

    .quick-action-card:hover .quick-action-icon {
        background: #111827;
        color: #fff;
    }

    .quick-action-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: #374151;
    }

    /* Responsive */
    @@media (max-width: 1200px) {
        .stats-grid,
        .inventory-grid,
        .quick-actions-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @@media (max-width: 640px) {
        .welcome-section {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .stats-grid,
        .inventory-grid,
        .quick-actions-grid {
            grid-template-columns: 1fr;
        }

        .chart-body {
            height: 250px;
        }
    }
</style>
}

@section Scripts {
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const ctx = document.getElementById('revenueChart').getContext('2d');
        
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [{
                    label: 'Doanh thu',
                    data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.RevenueByMonth)),
                    backgroundColor: '#111827',
                    borderRadius: 6,
                    borderSkipped: false,
                    maxBarThickness: 40
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#111827',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        padding: 12,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return new Intl.NumberFormat('vi-VN').format(context.raw) + '₫';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: { 
                            color: '#9ca3af',
                            font: { size: 12 }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: { 
                            color: '#f3f4f6',
                            drawBorder: false
                        },
                        ticks: { 
                            color: '#9ca3af',
                            font: { size: 12 },
                            callback: function(value) {
                                if (value >= 1000000) {
                                    return (value / 1000000).toFixed(0) + 'M';
                                }
                                if (value >= 1000) {
                                    return (value / 1000).toFixed(0) + 'K';
                                }
                                return value;
                            }
                        }
                    }
                }
            }
        });
    });
</script>
}