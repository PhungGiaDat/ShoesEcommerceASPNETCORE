@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="admin-dashboard">
    <!-- Welcome Section -->
    <div class="welcome-section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="welcome-card">
                        <h1 class="welcome-title">
                            <i class="fas fa-tachometer-alt me-3"></i>
                            Chào m?ng ??n v?i H? th?ng Qu?n tr?
                        </h1>
                        <p class="welcome-subtitle">
                            Qu?n lý c?a hàng giày m?t cách hi?u qu? và chuyên nghi?p
                        </p>
                        @if (User.Identity?.IsAuthenticated == true)
                        {
                            <div class="user-info">
                                <span class="user-greeting">
                                    <i class="fas fa-user-circle me-2"></i>
                                    Xin chào, <strong>@(User.FindFirst("FullName")?.Value ?? "Administrator")</strong>
                                </span>
                                <small class="user-role">
                                    Vai trò: @(User.IsInRole("Admin") ? "Qu?n tr? viên" : "Nhân viên")
                                </small>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-section">
        <div class="container-fluid">
            <div class="row g-4">
                <div class="col-xl-3 col-lg-6">
                    <div class="stat-card">
                        <div class="stat-icon bg-primary">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3>@(ViewBag.StaffCount ?? 0)</h3>
                            <p>Nhân viên</p>
                            <small class="text-success">
                                <i class="fas fa-arrow-up me-1"></i>
                                Ho?t ??ng t?t
                            </small>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-lg-6">
                    <div class="stat-card">
                        <div class="stat-icon bg-success">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="stat-content">
                            <h3>@(ViewBag.DepartmentCount ?? 0)</h3>
                            <p>Phòng ban</p>
                            <small class="text-info">
                                <i class="fas fa-info-circle me-1"></i>
                                ?ã thi?t l?p
                            </small>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-lg-6">
                    <div class="stat-card">
                        <div class="stat-icon bg-warning">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <div class="stat-content">
                            <h3>@(ViewBag.RoleCount ?? 0)</h3>
                            <p>Vai trò</p>
                            <small class="text-muted">
                                <i class="fas fa-check me-1"></i>
                                ?ã c?u hình
                            </small>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-lg-6">
                    <div class="stat-card">
                        <div class="stat-icon bg-info">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-content">
                            <h3>
                                @if (ViewBag.DatabaseStatus == "Connected")
                                {
                                    <i class="fas fa-check-circle text-success"></i>
                                }
                                else
                                {
                                    <i class="fas fa-times-circle text-danger"></i>
                                }
                            </h3>
                            <p>Database</p>
                            <small class="@(ViewBag.DatabaseStatus == "Connected" ? "text-success" : "text-danger")">
                                @(ViewBag.DatabaseStatus ?? "Unknown")
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Credentials Section -->
    <div class="test-section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="test-credentials-card">
                        <h2>
                            <i class="fas fa-key me-2"></i>
                            Tài kho?n Test - H? th?ng Qu?n tr?
                        </h2>
                        <p class="text-muted">S? d?ng các tài kho?n sau ?? ??ng nh?p và ki?m tra ch?c n?ng:</p>
                        
                        <div class="credentials-grid">
                            <!-- Admin Account -->
                            <div class="credential-card admin-card">
                                <div class="credential-header">
                                    <i class="fas fa-crown"></i>
                                    <span>Qu?n tr? viên</span>
                                </div>
                                <div class="credential-body">
                                    <div class="credential-field">
                                        <label>Email:</label>
                                        <span class="credential-value">admin@shoesstore.vn</span>
                                        <button class="copy-btn" onclick="copyToClipboard('admin@shoesstore.vn')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-field">
                                        <label>M?t kh?u:</label>
                                        <span class="credential-value">Admin123!</span>
                                        <button class="copy-btn" onclick="copyToClipboard('Admin123!')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-perms">
                                        <i class="fas fa-check"></i> Toàn quy?n qu?n tr?
                                    </div>
                                </div>
                            </div>

                            <!-- Manager Account -->
                            <div class="credential-card manager-card">
                                <div class="credential-header">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Qu?n lý</span>
                                </div>
                                <div class="credential-body">
                                    <div class="credential-field">
                                        <label>Email:</label>
                                        <span class="credential-value">manager@shoesstore.vn</span>
                                        <button class="copy-btn" onclick="copyToClipboard('manager@shoesstore.vn')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-field">
                                        <label>M?t kh?u:</label>
                                        <span class="credential-value">Manager123!</span>
                                        <button class="copy-btn" onclick="copyToClipboard('Manager123!')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-perms">
                                        <i class="fas fa-check"></i> Qu?n lý c?a hàng
                                    </div>
                                </div>
                            </div>

                            <!-- Staff Account -->
                            <div class="credential-card staff-card">
                                <div class="credential-header">
                                    <i class="fas fa-user"></i>
                                    <span>Nhân viên</span>
                                </div>
                                <div class="credential-body">
                                    <div class="credential-field">
                                        <label>Email:</label>
                                        <span class="credential-value">staff@shoesstore.vn</span>
                                        <button class="copy-btn" onclick="copyToClipboard('staff@shoesstore.vn')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-field">
                                        <label>M?t kh?u:</label>
                                        <span class="credential-value">Staff123!</span>
                                        <button class="copy-btn" onclick="copyToClipboard('Staff123!')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="credential-perms">
                                        <i class="fas fa-check"></i> Thao tác c? b?n
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="test-instructions">
                            <h3><i class="fas fa-info-circle me-2"></i>H??ng d?n s? d?ng:</h3>
                            <ol>
                                <li>??ng xu?t tài kho?n hi?n t?i (n?u có)</li>
                                <li>Truy c?p trang ??ng nh?p: <a href="/Account/Login" target="_blank">/Account/Login</a></li>
                                <li>S? d?ng thông tin ??ng nh?p ? trên</li>
                                <li>Sau khi ??ng nh?p thành công, b?n s? ???c chuy?n ??n trang qu?n tr?</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .admin-dashboard {
        min-height: 100vh;
        background: #f8f9fa;
    }

    .welcome-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem 0;
    }

    .welcome-card {
        text-align: center;
        padding: 2rem;
    }

    .welcome-title {
        font-size: 2.5rem;
        font-weight: 300;
        margin-bottom: 1rem;
    }

    .welcome-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 2rem;
    }

    .user-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }

    .user-greeting {
        font-size: 1.1rem;
    }

    .user-role {
        opacity: 0.8;
        background: rgba(255,255,255,0.2);
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
    }

    .stats-section {
        padding: 2rem 0;
        margin-top: -1rem;
    }

    .stat-card {
        background: white;
        border-radius: 0.5rem;
        padding: 1.5rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: transform 0.2s ease;
    }

    .stat-card:hover {
        transform: translateY(-2px);
    }

    .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
    }

    .stat-content h3 {
        font-size: 2rem;
        font-weight: 600;
        margin: 0;
        color: #2d3748;
    }

    .stat-content p {
        margin: 0;
        color: #718096;
        font-weight: 500;
    }

    .test-section {
        padding: 2rem 0;
    }

    .test-credentials-card {
        background: white;
        border-radius: 0.5rem;
        padding: 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .test-credentials-card h2 {
        color: #2d3748;
        margin-bottom: 1rem;
    }

    .credentials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .credential-card {
        border-radius: 0.5rem;
        overflow: hidden;
        border: 1px solid #e2e8f0;
        transition: box-shadow 0.2s ease;
    }

    .credential-card:hover {
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .credential-header {
        padding: 1rem;
        color: white;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .admin-card .credential-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .manager-card .credential-header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .staff-card .credential-header {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .credential-body {
        padding: 1.5rem;
    }

    .credential-field {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .credential-field label {
        font-weight: 600;
        color: #4a5568;
        width: 80px;
        flex-shrink: 0;
    }

    .credential-value {
        font-family: 'Courier New', monospace;
        background: #f7fafc;
        padding: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid #e2e8f0;
        flex: 1;
    }

    .copy-btn {
        background: #3182ce;
        color: white;
        border: none;
        padding: 0.5rem;
        border-radius: 0.25rem;
        cursor: pointer;
        transition: background 0.2s ease;
    }

    .copy-btn:hover {
        background: #2c5282;
    }

    .credential-perms {
        color: #38a169;
        font-weight: 500;
        margin-top: 1rem;
    }

    .test-instructions {
        background: #edf2f7;
        padding: 1.5rem;
        border-radius: 0.5rem;
        margin-top: 2rem;
    }

    .test-instructions h3 {
        color: #2d3748;
        margin-bottom: 1rem;
    }

    .test-instructions ol {
        color: #4a5568;
        line-height: 1.6;
    }

    .test-instructions a {
        color: #3182ce;
        text-decoration: none;
    }

    .test-instructions a:hover {
        text-decoration: underline;
    }

    @@media (max-width: 768px) {
        .welcome-title {
            font-size: 2rem;
        }
        
        .credentials-grid {
            grid-template-columns: 1fr;
        }
        
        .stat-card {
            flex-direction: column;
            text-align: center;
        }
    }
</style>

<script>
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(function() {
            // Create a temporary notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #38a169;
                color: white;
                padding: 1rem;
                border-radius: 0.5rem;
                z-index: 1000;
                font-weight: 500;
            `;
            notification.textContent = '?ã copy vào clipboard!';
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 2000);
        }).catch(function(err) {
            console.error('Could not copy text: ', err);
        });
    }
</script>